# Greater Cairo Smart City Transportation Optimization System

This project implements a comprehensive transportation management and optimization system for Greater Cairo, focusing on infrastructure design, traffic flow optimization, emergency response planning, and public transit enhancement.

## Project Structure

The project is organized into several modules, each addressing a specific aspect of transportation management:

```
transportation_system/
├── data/                     # Input data files (JSON format)
│   ├── road_data.json
│   ├── traffic_data.json
│   ├── transit_data.json
│   └── facilities.json
├── infrastructure/           # Road network infrastructure design and analysis
│   ├── kruskal_modified.py
│   ├── visualize_network.py
│   ├── cost_analysis.py
│   └── README.md
├── traffic_flow/             # Traffic flow analysis, shortest paths, simulation
│   ├── dijkstra_time_dependent.py
│   ├── yen_alternate_routes.py
│   ├── traffic_simulation.py
│   ├── congestion_analysis.py
│   └── README.md
├── emergency/                # Emergency vehicle routing and response simulation
│   ├── astar_emergency.py
│   ├── emergency_simulation.py
│   ├── response_analysis.py
│   └── README.md
├── transit/                  # Public transit (metro, bus) optimization and analysis
│   ├── transit_optimization.py
│   ├── visualize_transit.py
│   ├── improvement_analysis.py
│   └── README.md
├── integration/              # System integration, main application logic
│   ├── system_manager.py     # Core class to manage and call module functions
│   ├── dashboard.py          # Streamlit UI (to be developed/integrated)
│   ├── system_report.py      # For generating consolidated reports (conceptual)
│   ├── main.py               # Main entry point for the application (Streamlit)
│   └── README.md
├── tests/                    # Unit and integration tests for modules
│   ├── test_infrastructure.py
│   ├── test_traffic_flow.py
│   ├── test_emergency.py
│   ├── test_transit.py
│   └── test_integration.py
├── output/                   # Output files generated by the system
│   ├── reports/              # Generated textual reports (e.g., JSON, CSV)
│   │   └── system_report.json (example)
│   └── visualizations/       # Generated images, maps, and animation frames
│       ├── road_network.png
│       ├── traffic_simulation.mp4 (example, generated from frames)
│       ├── emergency_simulation.mp4 (example, generated from frames)
│       ├── transit_map.html (example, if using interactive maps)
│       ├── simulation_frames/      # Frames for traffic_simulation.py
│       └── emergency_sim_frames/ # Frames for emergency_simulation.py
├── docs/                     # Project documentation
│   ├── system_documentation.md # Detailed technical documentation
│   └── user_guide.pdf          # User manual for the application
└── README.md                 # This file: main project overview and setup
```

## Modules Overview

*   **Data**: Contains all input datasets in JSON format, describing roads, facilities, traffic patterns, and public transit information.
*   **Infrastructure**: Focuses on the physical road network. Includes algorithms for Minimum Spanning Tree (MST) based on cost/distance, network visualization, and cost analysis for new constructions.
*   **Traffic Flow**: Deals with vehicle movement and congestion. Implements Dijkstra_s algorithm for time-dependent shortest paths, Yen_s K-shortest paths for alternatives, traffic simulation, and congestion analysis.
*   **Emergency**: Optimizes routes for emergency services. Uses A* search for fast routing, considering traffic conditions and priority. Includes simulation of emergency responses and analysis of response times.
*   **Transit**: Manages public transportation. Includes functions for optimizing bus fleet allocation, assessing feasibility of new metro lines, visualizing transit routes, and analyzing demand coverage.
*   **Integration**: Contains the `SystemManager` class that orchestrates operations across different modules. The `dashboard.py` (Streamlit application) will use this manager to provide a user interface for interacting with the system.
*   **Tests**: Includes test scripts for each module to ensure functionality and correctness.
*   **Output**: Stores all generated files, including reports, visualizations (maps, graphs), and simulation outputs.
*   **Docs**: Contains detailed technical documentation and a user guide.

## Setup and Installation

1.  **Prerequisites**:
    *   Python 3.9+ (Python 3.11 recommended as used in development)
    *   `pip` for package installation.
    *   (Optional but recommended for simulations) `ffmpeg` to create videos from simulation frames.

2.  **Clone the Repository (Conceptual)**:
    ```bash
    # git clone <repository_url>
    # cd transportation_system
    ```

3.  **Install Dependencies**:
    The primary dependencies are NetworkX for graph operations and Matplotlib for plotting. Streamlit will be used for the dashboard.
    ```bash
    pip install networkx matplotlib pandas streamlit
    ```
    (Note: `pandas` is used implicitly by some data loading/conversion scripts, good to have.)

## Running the System

1.  **Data Preparation**:
    *   Ensure all required JSON data files are present in the `transportation_system/data/` directory.
    *   The structure of these files is critical. Refer to sample data or module docstrings for expected formats.

2.  **Running Individual Modules/Tests**:
    *   Most Python scripts within each module (e.g., `infrastructure/kruskal_modified.py`) and in the `tests/` directory can be run directly from the command line to test their specific functionalities:
        ```bash
        python3.11 infrastructure/kruskal_modified.py
        python3.11 tests/test_infrastructure.py
        ```
    *   These scripts typically print output to the console or save visualization files to the `output/visualizations/` directory.

3.  **Running the Integrated System (via SystemManager - for testing logic)**:
    *   The `integration/system_manager.py` script can be run to test the orchestration of various module functions:
        ```bash
        python3.11 integration/system_manager.py
        ```

4.  **Running the Dashboard Application (Streamlit)**:
    *   The main user interface is intended to be `integration/dashboard.py` (which will use `main.py` or be `main.py`).
    *   To run the Streamlit application (once `dashboard.py` or `main.py` is fully implemented):
        ```bash
        streamlit run integration/main.py
        ```
        Or, if `dashboard.py` is the entry point:
        ```bash
        streamlit run integration/dashboard.py
        ```
    *   This will start a web server, and you can access the dashboard through your browser (usually at `http://localhost:8501`).

## Generating Simulation Videos

*   The `traffic_simulation.py` and `emergency_simulation.py` scripts generate a series of PNG frames in their respective subdirectories within `output/visualizations/`.
*   To compile these frames into a video, you can use `ffmpeg` (if installed). Example commands are usually printed by the simulation scripts upon completion:
    *   For traffic simulation:
        ```bash
        ffmpeg -r 10 -i output/visualizations/simulation_frames/sim_step_%03d.png -c:v libx264 -vf fps=25 -pix_fmt yuv420p output/visualizations/traffic_simulation.mp4
        ```
    *   For emergency simulation:
        ```bash
        ffmpeg -r 5 -i output/visualizations/emergency_sim_frames/emergency_sim_step_%03d.png -c:v libx264 -vf fps=10 -pix_fmt yuv420p output/visualizations/emergency_simulation.mp4
        ```

## Further Documentation

*   **Module-specific READMEs**: Each module directory (e.g., `infrastructure/`, `traffic_flow/`) contains a `README.md` file with details about its components, data dependencies, and usage.
*   **System Documentation**: For a detailed technical overview of the system architecture, algorithms, and data structures, refer to `docs/system_documentation.md`.
*   **User Guide**: For instructions on how to use the dashboard application and interpret its outputs, refer to `docs/user_guide.pdf`.

## Contributing (Conceptual)

(This section would typically include guidelines for developers wanting to contribute to the project, such as coding standards, branching strategy, and how to submit pull requests.)

## License (Conceptual)

(This section would specify the license under which the project is distributed, e.g., MIT, Apache 2.0.)

